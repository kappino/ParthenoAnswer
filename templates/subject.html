{% extends "base.html" %}

{% block body %}
  

{% if subjects %}
<div class="centered-block" style="width: 95%">
    <table border="1">
        <tr>
            <th>Sub-category</th>
            <th>Last Post</th>
            <th></th>
        </tr>
        {% for subject in subjects  %}
        <tr>
            {% if session['username'] %}
            <td class="leftpart"><a href="{{ url_for('view_post', subject=subject) }}"> <b>{{ subject }}</b></a></td>
            {% else %}
            <td class="leftpart"><b>{{ subject }}</b></td>
            {% endif %}
            {% if last_post[loop.index-1]["title"] %}
            {% if session['username'] %}
            <td class="rightpart"><a href="{{ url_for('comments', id=last_post[loop.index0]['_id']) }}"> {{ last_post[loop.index-1]["title"] }}</a></td>
            {% else %}
            <td class="rightpart">{{ last_post[loop.index-1]["title"] }}</td>
            {% endif %}
            {% else %}
            <td class="rightpart"> No posts yet... </td>
            {% endif %}
            {% if session['username'] %}
            <td><a class="item" href="{{ url_for('create_posts', subject=subject) }}">Add&nbsp;Post</a></td>
            {% endif %}
        </tr>
        {% endfor %}
    </table>
</div>
{% else %}
    <h1>No Subjects yet!</h1>
{% endif %}
    {% if not session['username'] %}
        <h3>
            You are not logged in, as such your posts will display to public as "Guest".
            To log-in, please head to the "Profile" section.
        </h3>
    {% else %}
        <h3>You are logged in as "{{session['username']}}", as such your username will be associated with the post.</h3>
    {% endif %}
</h2>



{% endblock %}
